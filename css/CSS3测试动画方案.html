<!DOCTYPE html>
<html>
<!--
CSS3 动画的套路(主要是定了一套测试动画的方案)
    translate 优先于 rorate
    animationend 事件
        在动画播完后触发
        动画播放被暂停不会触发
    animationiteration 事件
        在动画播放一轮后触发
        如果动画只播放一轮, 那么不会触发此事件
    利用事件测试动画
-->

<head>
    <meta charset="utf-8">
    <title>CSS3测试动画方案</title>
    <style>
        .gua-block {
            background: lightblue;
            width: 100px;
            height: 100px;
        }

        .gua-spin {
            animation: spin linear 2s;
            animation-iteration-count: 1;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(160deg) translate(0, 50px);
            }
        }
    </style>
</head>

<body>
    <div class="gua-block">
        方块
    </div>
    <button class="play">播放动画</button>
    <script>
        var e = function(sel) {
            return document.querySelector(sel)
        }

        var playAnimation = function() {
            var animation = 'gua-spin'
            var block = e('.gua-block')
            // 让它开始播放动画
            block.classList.add(animation)
            // 绑定一个 animationend 事件, 在动画结束后删除动画 class
            block.addEventListener('animationend', function() {
                block.classList.remove(animation)
            })
        }

        var __main = function() {
            e('.play').addEventListener('click', function(e) {
                playAnimation()
            })
        }

        __main()
    </script>
</body>

</html>
